#summary Changes, In Progress, Issues, To Do.

= Introduction =

This page contains a change log, working notes on issues, items to-do, and items currently in progress.

= Changes =

== In Progress ==

===Classes Map and Camera===

Found a usability issue while trying to implement something slightly more complex than a single-layer map demo. It makes sense to optimize a static background, but perhaps not other layers. Some layers may be sparse, and increasing tile size would increase the total surface area to blit. Some layers may contain tiles that are obstacles, and changing tile size could impact collision detection (if the tiles serve that purpose, as is the common pygame sprite practice).

And the obvious conclusion is that collapse is not a good trick for all layers.

Therefore... per-layer tile_size and map_size. This will increase map rendering complexity somewhat and consume a bit of CPU. But if you have a map layer with many small tiles the payoff of collapsing a layer can be great.

===Sprites and Sprite Groups===

The library works best when sprites are in world coordinates. Therefore, once cannot use the stock pygame sprite groups to do the drawing. Need to provide at least a basic sprite group with a custom draw() method. The BucketGroup may be a good model.

Need a Sprite class that meets the basic requirements: a position and rect that stay in sync, and maybe some handy methods, like motion and collision move-back (see save_the_bunnies.py, linear interpolation when stepping (see Camera)...

== Issues ==

== To Do ==

== Changes Since 0.0.0 ==

SVN rev 58:
  * New: function collapse_map_level().
  * Fixed: tile combining for sparse map levels in function collapse_map_level(). Color key was not preserved in some cases.
  * Changed: Camera.interpolate now returns the interpolation value.
  * Changed: toolkit.load_tiled_maps() renamed to load_tiled_tmx_maps().
  * Changed: MapLayer now stores per-layer attributes, tile_size and map_size so that individual layers can be collapsed.
  * Changed: Camera.visible_tile_range now returns a list of (x1,y1,x2,y2) tuples, one for each layer.
  * Changed: Camera.visible_tiles now returns a list of MapLayer objects, one for each layer.
  * Changed: toolkit functions modified to use the Map, MapLayer, and Camera changes: make_tiles(), make_tiles2(), load_tiled_tmx_maps(), collapse_map_level(), draw_tiles(), draw_labels(), and draw_grid().
  * Changed: toolkit functions draw_labels(), and draw_grid() now have a default argument layer=0.
  * Changed: `__init__.py` now imports Map and MapLayer before Camera.

SVN rev 60:
  * Changed: __init__.py, Map and MapLayer imported before Camera.
  * Changed: camera.py, roles of update() and interpolate() changed.
  * Changed: camera.py, interpolate() simplified.
  * Changed: screen.py, Screen class split off into a Surface class for subsurfaces.
  * Changed: examples tweaked for compatibility.

SVN rev 61:
  * New: sprite.py with BucketSprite and BucketGroup.
  * Changed: __init__.py imports classes from sprite.py.